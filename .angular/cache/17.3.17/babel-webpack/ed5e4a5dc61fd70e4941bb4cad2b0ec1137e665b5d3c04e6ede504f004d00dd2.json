{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { marked } from 'marked';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"./simple-table.component\";\nfunction AnalysisDialogComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 30)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"file_download\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"href\", ctx_r0.data.mdUrl);\n  }\n}\nfunction AnalysisDialogComponent_mat_card_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 31)(1, \"div\", 32)(2, \"div\", 33);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 34);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 35)(8, \"mat-icon\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(10, \"div\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const k_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(\"kpi-\" + i_r3 % 4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.displayKpi[k_r2]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 5, k_r2));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getKpiIcon(k_r2));\n  }\n}\nfunction AnalysisDialogComponent_mat_card_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 37)(1, \"mat-card-header\")(2, \"mat-icon\", 38);\n    i0.ɵɵtext(3, \"phone_missed\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-title\");\n    i0.ɵɵtext(5, \"High-Miss Rate Owners\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-card-subtitle\");\n    i0.ɵɵtext(7, \"Users requiring attention\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"mat-card-content\");\n    i0.ɵɵelement(9, \"app-simple-table\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"rows\", ctx_r0.data.miss_by_owner);\n  }\n}\nexport let AnalysisDialogComponent = /*#__PURE__*/(() => {\n  class AnalysisDialogComponent {\n    constructor(data, sanitizer) {\n      this.data = data;\n      this.sanitizer = sanitizer;\n      this.objectKeys = Object.keys;\n      /** KPI map with “longest” flattened into a readable string */\n      this.displayKpi = {};\n      /*  1 — build friendly KPI map */\n      this.displayKpi = {\n        ...data.kpi\n      };\n      if (typeof data.kpi.longest === 'object' && data.kpi.longest) {\n        const l = data.kpi.longest;\n        this.displayKpi['longest'] = `${l.duration} (${l.from_name} → ${l.to_name})`;\n      }\n      /*  2 — convert Markdown → HTML and mark it safe */\n      const html = marked.parse(data.summary || ''); // cast to string to satisfy TS\n      this.summaryHtml = this.sanitizer.bypassSecurityTrustHtml(html);\n    }\n    static {\n      this.ɵfac = function AnalysisDialogComponent_Factory(t) {\n        return new (t || AnalysisDialogComponent)(i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.DomSanitizer));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AnalysisDialogComponent,\n        selectors: [[\"app-analysis-dialog\"]],\n        decls: 86,\n        vars: 9,\n        consts: [[1, \"dialog-header\"], [1, \"header-content\"], [1, \"title-section\"], [1, \"header-icon\"], [\"mat-dialog-title\", \"\", 1, \"main-title\"], [\"mat-icon-button\", \"\", \"download\", \"\", \"class\", \"download-btn\", \"matTooltip\", \"Download Report\", 3, \"href\", 4, \"ngIf\"], [1, \"content\"], [\"elevation\", \"0\", 1, \"summary-card\"], [\"mat-card-avatar\", \"\", 1, \"summary-icon\"], [1, \"summary-content\", 3, \"innerHTML\"], [1, \"metrics-section\"], [1, \"section-title\"], [1, \"kpi-grid\"], [\"class\", \"kpi-card\", \"elevation\", \"2\", 3, \"class\", 4, \"ngFor\", \"ngForOf\"], [1, \"charts-section\"], [1, \"charts-grid\"], [\"elevation\", \"2\", 1, \"chart-card\"], [1, \"chart-wrapper\"], [\"alt\", \"Call results\", 3, \"src\"], [\"alt\", \"Daily volume\", 3, \"src\"], [1, \"tables-section\"], [1, \"tables-grid\"], [\"elevation\", \"2\", 1, \"data-table-card\"], [\"mat-card-avatar\", \"\", 1, \"table-icon\", \"talk-time\"], [3, \"rows\"], [\"mat-card-avatar\", \"\", 1, \"table-icon\", \"external\"], [\"mat-card-avatar\", \"\", 1, \"table-icon\", \"location\"], [\"class\", \"data-table-card alert-card\", \"elevation\", \"2\", 4, \"ngIf\"], [1, \"dialog-actions\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"mat-dialog-close\", \"\"], [\"mat-icon-button\", \"\", \"download\", \"\", \"matTooltip\", \"Download Report\", 1, \"download-btn\", 3, \"href\"], [\"elevation\", \"2\", 1, \"kpi-card\"], [1, \"kpi-content\"], [1, \"kpi-value\"], [1, \"kpi-label\"], [1, \"kpi-icon\"], [1, \"kpi-gradient\"], [\"elevation\", \"2\", 1, \"data-table-card\", \"alert-card\"], [\"mat-card-avatar\", \"\", 1, \"table-icon\", \"missed\"]],\n        template: function AnalysisDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"mat-icon\", 3);\n            i0.ɵɵtext(4, \"analytics\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"h2\", 4);\n            i0.ɵɵtext(6, \"Call Intelligence Report\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(7, AnalysisDialogComponent_button_7_Template, 3, 1, \"button\", 5);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"mat-dialog-content\", 6)(9, \"mat-card\", 7)(10, \"mat-card-header\")(11, \"mat-icon\", 8);\n            i0.ɵɵtext(12, \"summarize\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"mat-card-title\");\n            i0.ɵɵtext(14, \"Executive Summary\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"mat-card-content\");\n            i0.ɵɵelement(16, \"div\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 10)(18, \"h3\", 11)(19, \"mat-icon\");\n            i0.ɵɵtext(20, \"trending_up\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(21, \" Key Performance Indicators \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 12);\n            i0.ɵɵtemplate(23, AnalysisDialogComponent_mat_card_23_Template, 11, 7, \"mat-card\", 13);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"div\", 14)(25, \"h3\", 11)(26, \"mat-icon\");\n            i0.ɵɵtext(27, \"bar_chart\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(28, \" Analytics Overview \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"div\", 15)(30, \"mat-card\", 16)(31, \"mat-card-header\")(32, \"mat-card-title\");\n            i0.ɵɵtext(33, \"Call Results Distribution\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(34, \"mat-card-content\")(35, \"div\", 17);\n            i0.ɵɵelement(36, \"img\", 18);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(37, \"mat-card\", 16)(38, \"mat-card-header\")(39, \"mat-card-title\");\n            i0.ɵɵtext(40, \"Daily Call Volume\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(41, \"mat-card-content\")(42, \"div\", 17);\n            i0.ɵɵelement(43, \"img\", 19);\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(44, \"div\", 20)(45, \"h3\", 11)(46, \"mat-icon\");\n            i0.ɵɵtext(47, \"table_view\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(48, \" Detailed Insights \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"div\", 21)(50, \"mat-card\", 22)(51, \"mat-card-header\")(52, \"mat-icon\", 23);\n            i0.ɵɵtext(53, \"record_voice_over\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(54, \"mat-card-title\");\n            i0.ɵɵtext(55, \"Top Talk-Time Owners\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(56, \"mat-card-subtitle\");\n            i0.ɵɵtext(57, \"Users with highest call engagement\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(58, \"mat-card-content\");\n            i0.ɵɵelement(59, \"app-simple-table\", 24);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(60, \"mat-card\", 22)(61, \"mat-card-header\")(62, \"mat-icon\", 25);\n            i0.ɵɵtext(63, \"phone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(64, \"mat-card-title\");\n            i0.ɵɵtext(65, \"Top External Numbers\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(66, \"mat-card-subtitle\");\n            i0.ɵɵtext(67, \"Most frequently contacted numbers\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(68, \"mat-card-content\");\n            i0.ɵɵelement(69, \"app-simple-table\", 24);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(70, \"mat-card\", 22)(71, \"mat-card-header\")(72, \"mat-icon\", 26);\n            i0.ɵɵtext(73, \"location_on\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(74, \"mat-card-title\");\n            i0.ɵɵtext(75, \"Top Inbound Locations\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(76, \"mat-card-subtitle\");\n            i0.ɵɵtext(77, \"Geographic call distribution\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(78, \"mat-card-content\");\n            i0.ɵɵelement(79, \"app-simple-table\", 24);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(80, AnalysisDialogComponent_mat_card_80_Template, 10, 1, \"mat-card\", 27);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(81, \"mat-dialog-actions\", 28)(82, \"button\", 29)(83, \"mat-icon\");\n            i0.ɵɵtext(84, \"check\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(85, \" Close Report \");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.data.mdUrl);\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"innerHTML\", ctx.summaryHtml, i0.ɵɵsanitizeHtml);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.objectKeys(ctx.displayKpi));\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"src\", \"assets/\" + ctx.data.charts.call_result, i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"src\", \"assets/\" + ctx.data.charts.daily_volume, i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(16);\n            i0.ɵɵproperty(\"rows\", ctx.data.top_talk);\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"rows\", ctx.data.top_numbers);\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"rows\", ctx.data.top_locations);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.data.miss_by_owner.length);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.MatDialogClose, i3.MatDialogTitle, i3.MatDialogActions, i3.MatDialogContent, i4.MatButton, i4.MatIconButton, i5.MatIcon, i6.MatCard, i6.MatCardAvatar, i6.MatCardContent, i6.MatCardHeader, i6.MatCardSubtitle, i6.MatCardTitle, i7.SimpleTableComponent, i2.TitleCasePipe],\n        styles: [\".title[_ngcontent-%COMP%]{margin-bottom:4px}.content[_ngcontent-%COMP%]{max-width:900px}mat-card[_ngcontent-%COMP%]{margin:8px 0}.summary[_ngcontent-%COMP%]{background:#fafafa}.kpi-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.kpi-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{text-align:center;padding:8px 4px}.kpi-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.kpi-key[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.charts[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:480px;margin:4px 8px}.table[_ngcontent-%COMP%]   app-simple-table[_ngcontent-%COMP%]{width:100%}\"]\n      });\n    }\n  }\n  return AnalysisDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}